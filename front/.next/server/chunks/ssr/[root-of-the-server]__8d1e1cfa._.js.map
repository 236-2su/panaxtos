{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SSAFY/Desktop/panaxtos/front/app/admin/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport axios from 'axios';\r\n\r\nexport default function AdminDashboard() {\r\n    const router = useRouter();\r\n    const [reservations, setReservations] = useState([]);\r\n    const [reviews, setReviews] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n            router.push('/login');\r\n            return;\r\n        }\r\n        setIsLoggedIn(true);\r\n        fetchData(token);\r\n    }, [router]);\r\n\r\n    const fetchData = async (token: string) => {\r\n        try {\r\n            const [resReservations, resReviews] = await Promise.all([\r\n                axios.get('/api/reservations?admin=true', {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                }),\r\n                axios.get('/api/reviews')\r\n            ]);\r\n            setReservations(resReservations.data);\r\n            setReviews(resReviews.data);\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert('데이터를 불러오는데 실패했습니다.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteReview = async (id: number) => {\r\n        if (!confirm('정말 이 후기를 삭제하시겠습니까?')) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        try {\r\n            await axios.delete(`/api/reviews/${id}`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            alert('후기가 삭제되었습니다.');\r\n            setReviews(reviews.filter((r: any) => r.id !== id));\r\n        } catch (err) {\r\n            alert('삭제 실패');\r\n        }\r\n    };\r\n\r\n    const handleDeleteReservation = async (id: number) => {\r\n        if (!confirm('정말 이 예약을 삭제하시겠습니까?')) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        try {\r\n            await axios.delete(`/api/reservations/${id}`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            alert('예약이 삭제되었습니다.');\r\n            setReservations(reservations.filter((r: any) => r.id !== id));\r\n        } catch (err) {\r\n            alert('삭제 실패');\r\n        }\r\n    };\r\n\r\n    if (!isLoggedIn) return null;\r\n\r\n    return (\r\n        <div className=\"default-container py-10\">\r\n            <div className=\"flex justify-between items-center mb-8\">\r\n                <h1 className=\"text-3xl font-bold\">관리자 대시보드</h1>\r\n                <button\r\n                    onClick={() => {\r\n                        localStorage.removeItem('token');\r\n                        router.push('/login');\r\n                    }}\r\n                    className=\"text-red-500 hover:underline\"\r\n                >\r\n                    로그아웃\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"flex gap-4 mb-8\">\r\n                <button\r\n                    onClick={() => router.push('/admin/reviews/write')}\r\n                    className=\"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 font-bold\"\r\n                >\r\n                    + 훈련 후기 작성하기\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid lg:grid-cols-2 gap-8\">\r\n                {/* 예약 현황 */}\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold mb-4\">예약 현황 (전체)</h2>\r\n                    {loading ? (\r\n                        <p>로딩 중...</p>\r\n                    ) : (\r\n                        <div className=\"bg-white shadow overflow-hidden sm:rounded-md max-h-[600px] overflow-y-auto\">\r\n                            <ul className=\"divide-y divide-gray-200\">\r\n                                {reservations.length === 0 ? (\r\n                                    <li className=\"p-4 text-center text-gray-500\">예약 내역이 없습니다.</li>\r\n                                ) : (\r\n                                    reservations.map((res: any) => (\r\n                                        <li key={res.id} className=\"p-4 hover:bg-gray-50\">\r\n                                            <div className=\"flex justify-between\">\r\n                                                <div>\r\n                                                    <p className=\"text-lg font-bold\">{res.name}</p>\r\n                                                    <p className=\"text-gray-600\">{res.phone}</p>\r\n                                                </div>\r\n                                                <div className=\"text-right\">\r\n                                                    <p className=\"text-blue-600 font-bold\">{new Date(res.dateTime).toLocaleString()}</p>\r\n                                                    <p className=\"text-gray-500 mb-1\">{res.programId || '상담 예약'}</p>\r\n                                                    <button\r\n                                                        onClick={() => handleDeleteReservation(res.id)}\r\n                                                        className=\"text-red-500 text-sm hover:underline\"\r\n                                                    >\r\n                                                        삭제\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                            {res.notes && (\r\n                                                <div className=\"mt-2 text-gray-700 bg-gray-100 p-2 rounded text-sm\">\r\n                                                    {res.notes}\r\n                                                </div>\r\n                                            )}\r\n                                        </li>\r\n                                    ))\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* 후기 관리 */}\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold mb-4\">후기 관리</h2>\r\n                    {loading ? (\r\n                        <p>로딩 중...</p>\r\n                    ) : (\r\n                        <div className=\"bg-white shadow overflow-hidden sm:rounded-md max-h-[600px] overflow-y-auto\">\r\n                            <ul className=\"divide-y divide-gray-200\">\r\n                                {reviews.length === 0 ? (\r\n                                    <li className=\"p-4 text-center text-gray-500\">등록된 후기가 없습니다.</li>\r\n                                ) : (\r\n                                    reviews.map((review: any) => (\r\n                                        <li key={review.id} className=\"p-4 hover:bg-gray-50\">\r\n                                            <div className=\"flex justify-between items-start mb-2\">\r\n                                                <h3 className=\"font-bold text-lg line-clamp-1\">{review.title}</h3>\r\n                                                <button\r\n                                                    onClick={() => handleDeleteReview(review.id)}\r\n                                                    className=\"text-red-500 text-sm hover:underline shrink-0 ml-2\"\r\n                                                >\r\n                                                    삭제\r\n                                                </button>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-gray-600 mb-2\">\r\n                                                {review.author} | {new Date(review.createdAt).toLocaleDateString()} | ★{review.rating}\r\n                                            </p>\r\n                                            <p className=\"text-gray-700 text-sm line-clamp-2\">{review.comment}</p>\r\n                                        </li>\r\n                                    ))\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}