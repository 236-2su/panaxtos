(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{63:(e,s,t)=>{"use strict";var a=t(7260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},4615:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5155),r=t(2115),n=t(63),l=t(7621),o=t(5400);function i(){let e=(0,n.useRouter)(),s=(0,n.useParams)().id,{data:t,error:i}=(0,o.Ay)(s?"/api/reviews/".concat(s):null,l.G),[c,d]=(0,r.useState)({title:"",author:"",password:"",content:"",rating:5}),[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&d({title:t.title||"",author:t.author||"",password:"",content:t.comment||"",rating:t.rating||5})},[t]);let h=e=>{let{name:s,value:t}=e.target;d(e=>({...e,[s]:t}))},x=async t=>{t.preventDefault(),m(!0);try{await (0,l.G)("/api/reviews/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,comment:c.content})}),alert("후기가 수정되었습니다."),e.push("/reviews/".concat(s))}catch(e){var a,r;alert((null==(r=e.response)||null==(a=r.data)?void 0:a.error)||"후기 수정에 실패했습니다. 비밀번호를 확인해주세요.")}finally{m(!1)}};return i?(0,a.jsx)("div",{className:"text-center py-20",children:"후기를 불러오는데 실패했습니다."}):t?(0,a.jsx)("div",{className:"min-h-screen py-16 px-4",style:{background:"var(--bg-main)"},children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"훈련 후기 수정"}),(0,a.jsx)("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-200",children:(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"제목"}),(0,a.jsx)("input",{type:"text",name:"title",required:!0,value:c.title,onChange:h,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"작성자"}),(0,a.jsx)("input",{type:"text",name:"author",required:!0,value:c.author,onChange:h,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:outline-none",readOnly:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"비밀번호 (확인용)"}),(0,a.jsx)("input",{type:"password",name:"password",required:!0,value:c.password,onChange:h,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:outline-none",placeholder:"작성 시 비밀번호 입력"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"평점"}),(0,a.jsxs)("select",{name:"rating",value:c.rating,onChange:h,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:outline-none",children:[(0,a.jsx)("option",{value:"5",children:"⭐⭐⭐⭐⭐ (5점)"}),(0,a.jsx)("option",{value:"4",children:"⭐⭐⭐⭐ (4점)"}),(0,a.jsx)("option",{value:"3",children:"⭐⭐⭐ (3점)"}),(0,a.jsx)("option",{value:"2",children:"⭐⭐ (2점)"}),(0,a.jsx)("option",{value:"1",children:"⭐ (1점)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"내용"}),(0,a.jsx)("textarea",{name:"content",required:!0,rows:6,value:c.content,onChange:h,className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:outline-none resize-none"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e.back(),className:"w-1/3 py-4 rounded-lg font-bold border border-gray-300 hover:bg-gray-50 transition-colors",children:"취소"}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-2/3 py-4 rounded-lg font-bold text-white transition-all hover:opacity-90 disabled:opacity-50",style:{background:"var(--color-accent)"},children:u?"수정 완료":"후기 수정하기"})]})]})})]})}):(0,a.jsx)("div",{className:"text-center py-20",children:"로딩 중..."})}},7410:(e,s,t)=>{Promise.resolve().then(t.bind(t,4615))},7621:(e,s,t)=>{"use strict";async function a(e,s){let t=await fetch(e,s);if(!t.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await t.json().catch(()=>({})),e.status=t.status,e}return t.json()}t.d(s,{G:()=>a})}},e=>{e.O(0,[19,441,255,358],()=>e(e.s=7410)),_N_E=e.O()}]);