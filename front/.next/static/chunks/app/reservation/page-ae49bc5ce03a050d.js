(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{63:(e,s,a)=>{"use strict";var r=a(7260);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},3817:(e,s,a)=>{"use strict";a.d(s,{default:()=>c});var r=a(5155),t=a(2115),n=a(63),l=a(5400),o=a(1342),i=a(7621);function c(){(0,n.useRouter)();let e=(0,n.useSearchParams)().get("branch")||"jinju-center",[s,a]=(0,t.useState)({name:"",phone:"",password:"",date:"",time:"",notes:""}),[c,d]=(0,t.useState)(!1),{data:u,error:m}=(0,l.Ay)("/api/reservations?branchId=".concat(e),i.G),h=e=>{let{name:s,value:r}=e.target;a(e=>({...e,[s]:r}))},x=async r=>{r.preventDefault(),d(!0);try{let r="".concat(s.date,"T").concat(s.time,":00");await (0,i.G)("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branchId:e,name:s.name,phone:s.phone,password:s.password,dateTime:r,notes:s.notes})}),alert("상담 예약이 완료되었습니다."),a({name:"",phone:"",password:"",date:"",time:"",notes:""}),(0,o.j)("/api/reservations?branchId=".concat(e))}catch(e){var t,n;console.error("Reservation failed:",e),alert((null==(n=e.response)||null==(t=n.data)?void 0:t.error)||"예약 신청 중 오류가 발생했습니다.")}finally{d(!1)}},p=async s=>{let a=prompt("예약 시 설정한 비밀번호를 입력해주세요.");if(a)try{await (0,i.G)("/api/reservations/".concat(s),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:a})}),alert("예약이 취소되었습니다."),(0,o.j)("/api/reservations?branchId=".concat(e))}catch(e){var r,t;alert((null==(t=e.response)||null==(r=t.data)?void 0:r.error)||"예약 취소에 실패했습니다. 비밀번호를 확인해주세요.")}},b=new Date().toISOString().split("T")[0];return(0,r.jsx)("div",{className:"min-h-screen py-16 px-4",style:{background:"var(--bg-main)"},children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4",style:{color:"var(--text-main)"},children:"상담 예약 신청"}),(0,r.jsx)("p",{className:"text-lg",style:{color:"var(--text-secondary)"},children:"편하신 시간에 전문가와 상담하세요."})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"rounded-2xl p-8 shadow-lg h-fit",style:{background:"var(--bg-card)",border:"1px solid var(--border-color)"},children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"예약하기"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"이름"}),(0,r.jsx)("input",{type:"text",name:"name",required:!0,value:s.name,onChange:h,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:outline-none",placeholder:"홍길동"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"연락처"}),(0,r.jsx)("input",{type:"tel",name:"phone",required:!0,value:s.phone,onChange:h,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:outline-none",placeholder:"010-1234-5678"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"비밀번호 (수정/취소용)"}),(0,r.jsx)("input",{type:"password",name:"password",required:!0,value:s.password,onChange:h,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:outline-none",placeholder:"4자리 이상",minLength:4})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"날짜"}),(0,r.jsx)("input",{type:"date",name:"date",required:!0,min:b,value:s.date,onChange:h,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"시간"}),(0,r.jsxs)("select",{name:"time",required:!0,value:s.time,onChange:h,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:outline-none",children:[(0,r.jsx)("option",{value:"",children:"선택"}),[10,11,13,14,15,16,17,18].map(e=>(0,r.jsx)("option",{value:"".concat(e,":00"),children:"".concat(e,":00")},e))]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"문의사항 (선택)"}),(0,r.jsx)("textarea",{name:"notes",rows:3,value:s.notes,onChange:h,className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:outline-none resize-none"})]}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 rounded-lg font-bold text-white transition-all hover:opacity-90 disabled:opacity-50",style:{background:"var(--color-accent)"},children:c?"처리 중...":"예약 신청하기"})]})]}),(0,r.jsxs)("div",{className:"rounded-2xl p-8 shadow-lg h-fit",style:{background:"white",border:"1px solid var(--border-color)"},children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-6",children:"예약 현황"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"* 개인정보 보호를 위해 이름 일부가 가려집니다."}),u?0===u.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"현재 예약된 일정이 없습니다."}):(0,r.jsx)("ul",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2",children:u.map(e=>(0,r.jsxs)("li",{className:"p-4 rounded-lg border border-gray-100 hover:shadow-md transition-shadow bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-bold text-lg mr-2",children:e.name}),(0,r.jsx)("span",{className:"text-sm px-2 py-1 rounded bg-blue-100 text-blue-800",children:"예약중"})]}),(0,r.jsx)("button",{onClick:()=>p(e.id),className:"text-xs text-red-500 hover:underline",children:"예약 취소"})]}),(0,r.jsxs)("div",{className:"text-gray-600",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2",children:["\uD83D\uDCC5 ",new Date(e.dateTime).toLocaleDateString()]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:["⏰ ",new Date(e.dateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]},e.id))}):(0,r.jsx)("p",{children:"로딩 중..."})]})]})]})})}},5083:(e,s,a)=>{Promise.resolve().then(a.bind(a,3817))},7621:(e,s,a)=>{"use strict";async function r(e,s){let a=await fetch(e,s);if(!a.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await a.json().catch(()=>({})),e.status=a.status,e}return a.json()}a.d(s,{G:()=>r})}},e=>{e.O(0,[19,441,255,358],()=>e(e.s=5083)),_N_E=e.O()}]);